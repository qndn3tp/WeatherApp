# ì´ ì›Œí¬í”Œë¡œìš°ì˜ ì´ë¦„
name: Weather App Build

# ì–¸ì œ ì‹¤í–‰í• ì§€ ì •í•˜ê¸°
on:
  push:
    branches: [ main ]

# í•  ì¼ë“¤
jobs:
  build:
    runs-on: macos-latest
    
    steps:
    # 1ë‹¨ê³„: ì½”ë“œ ë‹¤ìš´ë¡œë“œ
    - name: ğŸ“¥ ì½”ë“œ ë‹¤ìš´ë¡œë“œí•˜ê¸°
      uses: actions/checkout@v4
    
    # 2ë‹¨ê³„: Xcode ë²„ì „ë§Œ í™•ì¸
    - name: âš™ï¸ Xcode í™•ì¸
      run: |
        echo "=== Xcode ë²„ì „ ==="
        xcodebuild -version
        echo ""
        echo "=== ë¹Œë“œ ì‹œì‘! ==="
    
    # 3ë‹¨ê³„: í”„ë¡œì íŠ¸ ì •ë³´ í™•ì¸
    - name: ğŸ“‹ Weather í”„ë¡œì íŠ¸ ìŠ¤í‚´ í™•ì¸
      run: |
        echo "=== Weather.xcodeproj ìŠ¤í‚´ ì •ë³´ ==="
        xcodebuild -list -project Weather.xcodeproj
    
    # 4ë‹¨ê³„: ì˜ì¡´ì„± í™•ì¸
    - name: ğŸ“¦ ì˜ì¡´ì„± í™•ì¸
      run: |
        if [ -f "Podfile" ]; then
          echo "Podfile ë°œê²¬! CocoaPods ì„¤ì¹˜ ì¤‘..."
          sudo gem install cocoapods
          pod install
        else
          echo "Podfile ì—†ìŒ - ìˆœìˆ˜ iOS í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤ âœ…"
        fi
    
    # 5ë‹¨ê³„: Weather ì•± ë¹Œë“œ
    - name: ğŸ”¨ Weather ì•± ë¹Œë“œí•˜ê¸°
      run: |
        echo "=== âš¡ Weather ì•± ë¹Œë“œ ì‹œì‘! ==="
        echo "Weather ì•± ë¹Œë“œ ì¤‘..."
        xcodebuild build           -project Weather.xcodeproj           -scheme Weather           -destination "platform=iOS Simulator,name=iPhone 15 Pro"           -configuration Debug           CODE_SIGN_IDENTITY=""           CODE_SIGNING_REQUIRED=NO           ONLY_ACTIVE_ARCH=YES
        echo "=== âœ… Weather ì•± ë¹Œë“œ ì„±ê³µ! ==="
    
    # 6ë‹¨ê³„: ì„±ê³µ ë©”ì‹œì§€!
    - name: ğŸ‰ ì™„ë£Œ!
      run: |
        echo "ğŸ‰ğŸ‰ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ‰ğŸ‰ğŸ‰"
        echo ""
        echo "âœ… Weather ì•±ì´ ì„±ê³µì ìœ¼ë¡œ ë¹Œë“œë˜ì—ˆìŠµë‹ˆë‹¤!"
        echo "âœ… ì½”ë“œì— ì»´íŒŒì¼ ì—ëŸ¬ê°€ ì—†ìŠµë‹ˆë‹¤!"
        echo "âœ… í”„ë¡œì íŠ¸ ì„¤ì •ì´ ì˜¬ë°”ë¦…ë‹ˆë‹¤!"
        echo "âœ… iOS ì‹œë®¬ë ˆì´í„°ì—ì„œ ì‹¤í–‰ ê°€ëŠ¥í•©ë‹ˆë‹¤!"
        echo ""
        echo "ğŸš€ ì´ì œ ì§„ì§œ iOS ê°œë°œìì²˜ëŸ¼ CI/CDë¥¼ ì‚¬ìš©í•˜ê³  ìˆì–´ìš”!"