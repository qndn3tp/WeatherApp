# ì´ ì›Œí¬í”Œë¡œìš°ì˜ ì´ë¦„
name: Weather App Build

# ì–¸ì œ ì‹¤í–‰í• ì§€ ì •í•˜ê¸°
on:
  push:
    branches: [ main ]

# í•  ì¼ë“¤
jobs:
  build:
    # ğŸš¨ ìˆ˜ì •ëœ ë¶€ë¶„: Xcode 16.0ì´ ì„¤ì¹˜ëœ macos-14 ëŸ¬ë„ˆë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½
    runs-on: macos-14 
    
    steps:
    # 1ë‹¨ê³„: ì½”ë“œ ë‹¤ìš´ë¡œë“œ
    - name: ğŸ“¥ ì½”ë“œ ë‹¤ìš´ë¡œë“œí•˜ê¸°
      uses: actions/checkout@v4

    # 2ë‹¨ê³„: Xcode 16.x ë²„ì „ ì‚¬ìš© ì„¤ì •
    - name: âš™ï¸ Xcode 16.0 ì‚¬ìš©      
      uses: maxim-lobanov/setup-xcode@v1
      with:
        xcode-version: '16.0'

    # 3ë‹¨ê³„: Podfileì´ ìˆì„ ê²½ìš° ì˜ì¡´ì„± ì„¤ì¹˜
    - name: ğŸ“¦ ì˜ì¡´ì„± í™•ì¸ ë° ì„¤ì¹˜
      run: |
        if [ -f "Podfile" ]; then
          echo "Podfile ë°œê²¬! CocoaPods ì„¤ì¹˜ ì¤‘..."
          sudo gem install cocoapods
          pod install
        else
          echo "Podfile ì—†ìŒ - ìˆœìˆ˜ iOS í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤ âœ…"
        fi

    # 4ë‹¨ê³„: ë¹Œë“œ
    - name: ğŸ”¨ Weather ì•± ë¹Œë“œí•˜ê¸°      
      run: |
        echo "=== âš¡ Weather ì•± ë¹Œë“œ ì‹œì‘! ==="
        echo "ì‚¬ìš© ê°€ëŠ¥í•œ ì‹œë®¬ë ˆì´í„° í™•ì¸ ì¤‘..."
        xcrun simctl list devices available
        echo ""
        echo "Weather ì•± ë¹Œë“œ ì¤‘..."
        xcodebuild build           -project Weather.xcodeproj           -scheme Weather           -destination "generic/platform=iOS Simulator"           -configuration Debug           CODE_SIGN_IDENTITY=""           CODE_SIGNING_REQUIRED=NO           ONLY_ACTIVE_ARCH=YES
        
    # 5ë‹¨ê³„: ì„±ê³µ ë©”ì‹œì§€
    - name: ğŸ‰ ë¹Œë“œ ì™„ë£Œ!
      run: |
        echo "ğŸ‰ğŸ‰ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ‰ğŸ‰ğŸ‰"
        echo "âœ… Weather ì•± ë¹Œë“œê°€ ì„±ê³µí–ˆìŠµë‹ˆë‹¤!"